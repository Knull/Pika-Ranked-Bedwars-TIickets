// prisma/schema.prisma
// this is quite an important file, do not modify this unless you know what you're doing.
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Ticket {
  id              Int       @id @default(autoincrement())
  ticketNumber    Int
  ticketType      String
  status          String    // e.g., "open", "closed", "claimed", "deleted"
  channelId       String
  userId          String
  ticketMessageId String?
  reason          String?
  reportedUser    String?
  inviteLink      String?
  proofUrls       Json?
  transcriptUrl   String?
  lastMessageAt   DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  added_user      Json?
  added_roles     Json?
  duration        Int?
  outsideMessageId  String?
  logMessageUrl   String?
}

model TicketSettings {
  id            Int  @id @default(1)
  ticketCounter Int
}

model PlayerProfile {
  id            Int      @id @default(autoincrement())
  discordUserId String   @unique
  ign           String
  lastSeen      DateTime?
  ranks         Json?
  clanName      String?
  rankInfo      Json?
  friends       Json?
  createdAt     DateTime @default(now())
}

model TicketConfig {
  id                    Int      @id @default(autoincrement())
  ticketType            String   @unique
  permissions           Json?
  allowCustomInstructions     Boolean @default(false)
  useCustomInstructions   Boolean @default(false)
  instructions          String?
  previewTitle          String?
}

model TicketBlacklist {
  id        Int      @id @default(autoincrement())
  userId    String   @unique
  expiresAt DateTime?
  createdAt DateTime @default(now())
}

